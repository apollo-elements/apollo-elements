# Hugo Shortcodes Implementation Guide

This guide provides ready-to-use Hugo shortcode implementations for the Apollo Elements documentation migration.

---

## 1. Code Tabs Shortcode

**Location:** `/layouts/shortcodes/code-tabs.html`

```go-html-template
{{- $collection := .Get "collection" -}}
{{- $default := .Get "default" -}}
{{- $id := printf "code-tabs-%d" (now.Unix) -}}

<div class="code-tabs" data-collection="{{ $collection }}" data-default="{{ $default }}" id="{{ $id }}">
  <div class="code-tabs-nav">
    <!-- Tabs will be auto-generated by JavaScript -->
  </div>
  <div class="code-tabs-content">
    {{ .Inner }}
  </div>
</div>

<script>
(function() {
  const container = document.getElementById('{{ $id }}');
  const content = container.querySelector('.code-tabs-content');
  const nav = container.querySelector('.code-tabs-nav');
  const codeBlocks = content.querySelectorAll('pre code');
  const defaultTab = '{{ $default }}';

  // Extract tab names from fence info
  codeBlocks.forEach((block, index) => {
    const pre = block.parentElement;
    const infoString = block.className.match(/language-(\S+)/);
    if (!infoString) return;

    const parts = infoString[1].split(/\s+/);
    let tabName = parts[0];
    let tabLabel = tabName;

    // Look for "tab" directive
    const tabIndex = parts.indexOf('tab');
    if (tabIndex !== -1 && parts[tabIndex + 1]) {
      tabLabel = parts[tabIndex + 1];
    }

    // Create tab button
    const button = document.createElement('button');
    button.className = 'code-tab-button';
    button.textContent = tabLabel;
    button.setAttribute('data-tab', tabLabel);
    if (tabLabel === defaultTab) {
      button.classList.add('active');
      pre.classList.add('active');
    }
    button.addEventListener('click', () => {
      // Deactivate all tabs
      nav.querySelectorAll('.code-tab-button').forEach(b => b.classList.remove('active'));
      content.querySelectorAll('pre').forEach(p => p.classList.remove('active'));
      // Activate clicked tab
      button.classList.add('active');
      pre.classList.add('active');
      pre.setAttribute('data-tab', tabLabel);
    });

    nav.appendChild(button);
  });
})();
</script>

<style>
  .code-tabs {
    border: 1px solid var(--border-color, #e1e4e8);
    border-radius: 6px;
    margin: 1em 0;
  }

  .code-tabs-nav {
    display: flex;
    gap: 0.5em;
    padding: 0.5em;
    background: var(--tabs-bg, #f6f8fa);
    border-bottom: 1px solid var(--border-color, #e1e4e8);
    border-radius: 6px 6px 0 0;
  }

  .code-tab-button {
    padding: 0.5em 1em;
    border: none;
    background: transparent;
    cursor: pointer;
    border-radius: 4px;
    font-family: inherit;
    font-size: 0.9em;
    transition: background 0.2s;
  }

  .code-tab-button:hover {
    background: var(--tab-hover-bg, rgba(0, 0, 0, 0.05));
  }

  .code-tab-button.active {
    background: var(--tab-active-bg, white);
    font-weight: 600;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }

  .code-tabs-content > pre {
    display: none;
    margin: 0;
    border-radius: 0 0 6px 6px;
  }

  .code-tabs-content > pre.active {
    display: block;
  }
</style>
```

**Usage in Markdown:**
```markdown
{{< code-tabs collection="package-managers" default="npm" >}}

```bash tab npm
npm install @apollo-elements/core
```

```bash tab yarn
yarn add @apollo-elements/core
```

```bash tab pnpm
pnpm add @apollo-elements/core
```

{{< /code-tabs >}}
```

---

## 2. Icon Shortcode

**Location:** `/layouts/shortcodes/icon.html`

```go-html-template
{{- $name := .Get "name" | default (.Get 0) -}}
{{- $size := .Get "size" | default "medium" -}}

<span class="icon icon-{{ $name }} icon-{{ $size }}" role="img" aria-label="{{ $name }} icon">
  {{- partial (printf "icons/%s.svg" $name) . -}}
</span>
```

**Create SVG Partials:** `/layouts/partials/icons/`

For example, `/layouts/partials/icons/moon-landing.svg`:
```svg
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <!-- SVG content here -->
</svg>
```

**CSS:** Add to your main stylesheet:
```css
.icon {
  display: inline-block;
  width: 1.5em;
  height: 1.5em;
  vertical-align: middle;
}

.icon.icon-small {
  width: 1em;
  height: 1em;
}

.icon.icon-medium {
  width: 1.5em;
  height: 1.5em;
}

.icon.icon-large {
  width: 3em;
  height: 3em;
}

.icon svg {
  width: 100%;
  height: 100%;
  fill: currentColor;
}
```

**Usage in Markdown:**
```markdown
{{< icon "moon-landing" >}}
{{< icon name="space-capsule" size="large" >}}
```

---

## 3. SVG Include Shortcode

**Location:** `/layouts/shortcodes/svg.html`

```go-html-template
{{- $path := .Get "src" | default (.Get 0) -}}
{{- $alt := .Get "alt" | default "" -}}
{{- $class := .Get "class" | default "" -}}

{{- if hasPrefix $path "/" -}}
  {{- /* Absolute path from static/ */ -}}
  <img src="{{ $path }}" alt="{{ $alt }}" class="svg-image {{ $class }}" />
{{- else -}}
  {{- /* Relative path - resolve from page's directory */ -}}
  {{- $pagePath := path.Dir .Page.File.Path -}}
  {{- $fullPath := printf "/assets/%s/%s" $pagePath $path -}}
  <img src="{{ $fullPath }}" alt="{{ $alt }}" class="svg-image {{ $class }}" />
{{- end -}}
```

**Usage in Markdown:**
```markdown
<!-- Absolute path -->
{{< svg "/assets/getting-started/cycle.svg" alt="Apollo Elements cycle diagram" >}}

<!-- Relative path (resolves based on current page location) -->
{{< svg "cycle.svg" alt="Cycle diagram" class="diagram" >}}
```

---

## 4. Inline SVG Shortcode (Alternative)

For better performance and CSS styling, include SVG inline:

**Location:** `/layouts/shortcodes/svg-inline.html`

```go-html-template
{{- $path := .Get "src" | default (.Get 0) -}}
{{- $class := .Get "class" | default "" -}}

{{- $svgPath := "" -}}
{{- if hasPrefix $path "/" -}}
  {{- $svgPath = printf "static%s" $path -}}
{{- else -}}
  {{- $pagePath := path.Dir .Page.File.Path -}}
  {{- $svgPath = printf "static/assets/%s/%s" $pagePath $path -}}
{{- end -}}

<div class="svg-inline-container {{ $class }}">
  {{ readFile $svgPath | safeHTML }}
</div>
```

**Usage in Markdown:**
```markdown
{{< svg-inline "/assets/getting-started/cycle.svg" class="cycle-diagram" >}}
```

---

## 5. Figure with Caption Shortcode

**Location:** `/layouts/shortcodes/figure.html`

```go-html-template
{{- $src := .Get "src" -}}
{{- $alt := .Get "alt" | default "" -}}
{{- $caption := .Get "caption" | default "" -}}
{{- $class := .Get "class" | default "" -}}

<figure class="doc-figure {{ $class }}">
  {{- if strings.HasSuffix $src ".svg" -}}
    <img src="{{ $src }}" alt="{{ $alt }}" class="figure-image" />
  {{- else -}}
    {{ $image := resources.Get $src }}
    {{- if $image -}}
      <img src="{{ $image.RelPermalink }}" alt="{{ $alt }}" class="figure-image" />
    {{- else -}}
      <img src="{{ $src }}" alt="{{ $alt }}" class="figure-image" />
    {{- end -}}
  {{- end -}}

  {{- if $caption -}}
    <figcaption>{{ $caption | markdownify }}</figcaption>
  {{- else if .Inner -}}
    <figcaption>{{ .Inner | markdownify }}</figcaption>
  {{- end -}}
</figure>
```

**Usage in Markdown:**
```markdown
<!-- With caption parameter -->
{{< figure src="/assets/getting-started/cycle.svg"
           alt="Cycle diagram"
           caption="The Apollo Elements data flow cycle" >}}

<!-- With caption in content -->
{{< figure src="/assets/getting-started/cycle.svg" alt="Cycle diagram" >}}
The **Apollo Elements** data flow cycle showing queries, mutations, and state management.
{{< /figure >}}
```

---

## 6. Alert/Callout Shortcode

Useful for notes, warnings, tips:

**Location:** `/layouts/shortcodes/alert.html`

```go-html-template
{{- $type := .Get "type" | default "info" -}}
{{- $title := .Get "title" -}}

<div class="alert alert-{{ $type }}">
  {{- if $title -}}
    <div class="alert-title">{{ $title }}</div>
  {{- end -}}
  <div class="alert-content">
    {{ .Inner | markdownify }}
  </div>
</div>
```

**CSS:**
```css
.alert {
  padding: 1em;
  margin: 1em 0;
  border-left: 4px solid;
  border-radius: 4px;
}

.alert-info {
  background-color: #e7f3ff;
  border-color: #2196f3;
  color: #014361;
}

.alert-warning {
  background-color: #fff3cd;
  border-color: #ffc107;
  color: #856404;
}

.alert-danger {
  background-color: #f8d7da;
  border-color: #dc3545;
  color: #721c24;
}

.alert-success {
  background-color: #d4edda;
  border-color: #28a745;
  color: #155724;
}

.alert-title {
  font-weight: 600;
  margin-bottom: 0.5em;
}
```

**Usage in Markdown:**
```markdown
{{< alert type="warning" title="Important" >}}
Make sure to initialize your Apollo Client before using any query components.
{{< /alert >}}
```

---

## 7. Installation Commands Shortcode

Specialized version of code-tabs for installation:

**Location:** `/layouts/shortcodes/install.html`

```go-html-template
{{- $package := .Get "package" | default (.Get 0) -}}

{{< code-tabs collection="package-managers" default="npm" >}}

```bash tab npm
npm install {{ $package }}
```

```bash tab yarn
yarn add {{ $package }}
```

```bash tab pnpm
pnpm add {{ $package }}
```

{{< /code-tabs >}}
```

**Usage in Markdown:**
```markdown
{{< install "@apollo-elements/core" >}}
```

---

## Quick Reference: Replace TODOs

### SVG Includes
Find:
```
<!-- TODO: Include SVG file ./cycle.svg - needs Hugo shortcode or static asset -->
```

Replace with:
```
{{< svg "/assets/getting-started/cycle.svg" alt="Apollo Elements cycle diagram" >}}
```

### Icon References
Find:
```
<!-- TODO: Icon "space-capsule" - needs Hugo shortcode -->
```

Replace with:
```
{{< icon "space-capsule" >}}
```

### Style Blocks
Find:
```html
<!-- TODO: Review and move to Hugo CSS -->
<!-- STYLE BLOCK:
  .class { ... }
-->
```

1. Extract CSS to `/assets/scss/components/_component-name.scss`
2. Import in main SCSS file
3. Remove comment from markdown

---

## Data Files for Collections

Create data files for the collections used in code-tabs:

**`/data/package-managers.yaml`:**
```yaml
- id: npm
  name: npm
  command: npm

- id: yarn
  name: Yarn
  command: yarn

- id: pnpm
  name: pnpm
  command: pnpm
```

**`/data/libraries.yaml`:**
```yaml
- id: lit
  name: Lit

- id: fast
  name: FAST

- id: haunted
  name: Haunted

- id: atomico
  name: Atomico

- id: hybrids
  name: Hybrids

- id: mixins
  name: Mixins

- id: html
  name: HTML
```

---

## Testing Shortcodes

Create a test page: `/content/test-shortcodes.md`

```markdown
---
title: "Shortcode Tests"
draft: true
---

## Code Tabs Test

{{< code-tabs collection="package-managers" default="npm" >}}

```bash tab npm
npm install test
```

```bash tab yarn
yarn add test
```

{{< /code-tabs >}}

## Icon Test

{{< icon "moon-landing" >}} Landing icon

## SVG Test

{{< svg "/assets/getting-started/cycle.svg" alt="Test diagram" >}}
```

Run Hugo server and visit: `http://localhost:1313/test-shortcodes/`

---

## Summary

All shortcodes are now ready to implement. Priority order:

1. **code-tabs.html** - Most frequently used (101 instances)
2. **svg.html** - For SVG includes (2 instances)
3. **icon.html** - For icon references (2 instances)
4. Extract and organize CSS styles (13 style blocks)

After implementing these, run a search-and-replace operation to convert all TODO comments to proper shortcode usage.
