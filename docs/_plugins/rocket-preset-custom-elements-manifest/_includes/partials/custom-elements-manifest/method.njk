{% from "./macros.njk" import linkHeading, codeBlock %}
{% from "./macros.njk" import inheritance with context %}

<type-doc kind="method"
    data-method="{{ method.name }}"
    {{ ('data-inherited-from='+method.inheritedFrom.name) if method.inheritedFrom}}>
  <span slot="name">
    {% if method.privacy %}<em>{{ method.privacy }}</em>{% endif %}
    {% if method.async %}<em>async</em>{% endif %}
    {{ linkHeading(method.name) }}
    {% if method.optional %}<span>(optional)</span>{% endif %}
  </span>

  {{ inheritance(method) }}

  {%- if method.summary -%}
    {% renderTemplate 'njk,md'  %}{{ method.summary | safe }}{% endrenderTemplate %}
  {%- endif -%}

  {%- if method.description -%}
    {% renderTemplate 'njk,md'  %}{{ method.description | safe }}{% endrenderTemplate %}
  {%- endif -%}

  {% if method.parameters %}
    {{ linkHeading('Parameters', prefix=method.name, class=parameter) }}
    {% for param in method.parameters %}
      <type-doc kind="parameter" data-parameter="{{ param.name }}">
        <h4 slot="name">{{ param.name }}</h4>
        <span slot="type">{{ codeBlock(param.type | getTypeString) | linkToTypes | safe }}</span>
        {% if param.summary %}
          {% renderTemplate 'njk,md'  %}{{ param.summary | safe }}{% endrenderTemplate %}
        {% endif %}
        {% if param.description %}
          {% renderTemplate 'njk,md'  %}{{ param.description | safe }}{% endrenderTemplate %}
        {% endif %}
      </type-doc>
    {% endfor %} {# param #}
  {% endif %} {# parameters #}

  {% if method.return %}
    <type-doc kind="return">
      {{ linkHeading('Returns', prefix=method.name, slot='name', class=return) }}
      <span slot="type">{{ codeBlock(method.return.type | getTypeString) | linkToTypes | safe }}</span>
      {% if method.return.summary %}
        {% renderTemplate 'njk,md'  %}{{ method.return.summary | safe }}{% endrenderTemplate %}
      {% endif %}
      {% if method.return.description %}
        {% renderTemplate 'njk,md'  %}{{ method.return.description | safe }}{% endrenderTemplate %}
      {% endif %}
    </type-doc>
  {% endif %} {# return #}
</type-doc>
